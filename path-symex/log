Logbook, Alex Horn

                |       modulus     |   concrete-sum    |        bst        |      counter      |  insertion-sort   |     merge-sort    |   sum-recursive   |
                +-------------------+-------------------+-------------------+-------------------+-------------------+-------------------+-------------------+ 
                | N=2000            | N=46340           | N=7               | N=500             | N=7               | N=7               | N=46              |
                +---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
                | safe    |  unsafe | safe    | unsafe  | safe    | unsafe  | safe    | unsafe  | safe    | unsafe  | safe    | unsafe  | safe    | unsafe  |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
KLEE            | < 1s    | 24m     | < 1s    | < 1s    | 14m     | < 1s    | 7m 22s  | < 1s    | 36m     | < 1s    | 23m     | < 1s    | 23m     | 32m     |
2014-04-12      |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
-no-output      |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
-search=dfs     |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
-exit-on-error  |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
path-symex      | ERROR   | ERROR   | 3s      | 4s      | ERROR   | ERROR   | 1m 14s  | < 1s    | 36m     | 16m     | WRONG   | LIKELY  | WRONG   | LIKELY  |
2014-04-12      | see     | see     |         |         | see     | see     | --unwind|--unwind |         |         | RESULT  | BAD     | RESULT  | BAD     |
                | remark  | remark  |         |         | remark  | remark  |   500   |  500    |         |         |         | ANALYSIS|         | ANALYSIS|
                |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
CBMC            | 3s      | 3s      | 6s      | 11s     | TIMEOUT |TIMEOUT  | 4s      | 2s      | 1m 36s  | < 1s    | 5s      | < 1s    | TIMEOUT | < 1s    |
2014-04-12/13   |         |         |         |         | 11 h    |2h 30m   |         |         |         |         |         |         | 12 h    |         |
                |         |         |         |         | --unwind|--unwind | --unwind| --unwind|         |         |         |         |         |         |
                |         |         |         |         |   8     |  8      |   500   |   500   |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
NSE             | 46s     | 1m      | 3s      | 3s      | 6s      | 3s      | 2m 13s  | 5s      | 2m 2s   | 3s      | 11m 32s | 10m 7s  | 3s      | 3s      |
2014-04-16      |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
Manual transform|         |         |         |         |         |         |         |         |         |         |         |         |         |         |
DfsChecker      |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
NSE             | 3s      | 1m 28s  | 3s      | 3s      | 8s      | 3s      | 3m 21s  | 1m 11s  | 23s     | 3s      | 19s     | 3s      | 3s      | 3s      |
2014-04-23      |         |         |         |         |         |         |         |         |         |         | seconds |         |         |         |
Manual transform|         |         |         |         |         |         |         |         |         |         |         |         |         |         |
DfsPruneChecker |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
NSE             | 3s      | 56s     | 3s      | 3s      | 8s      | 3s      | 3m 21s  | 3s      | 21s     | 3s      | 22s     | 3s      | 3s      | 3s      |
2014-04-24      |         |         |         |         |         |         |         |         |         |         | seconds | seconds |         |         |
Manual transform|         |         |         |         |         |         |         |         |         |         |         |         |         |         |
DfsPruneChecker |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
                |
                |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
                |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
                |         |         |         |         |         |         |         |         |         |         |         |         |         |         |
----------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+


Remarks (Mid April 2014):

The majority of benchmarks with KLEE were run on machine dkr12. I had to switch
to drk11 for "sum-recursive" and "counter", however, because someone else started
to heavily use dkr12 in the middle of the experiments.

For KLEE, the following types of commands were run:

  $ llvm-gcc --emit-llvm -I ../../klee/include -D ENABLE_KLEE -D N=46 -std=c99 -c -g sum-recursive-safe.c
  $ time klee -no-output -search=dfs -exit-on-error sum-recursive-safe.o

All times correspond to "Elapsed time" as recorded by KLEE in its "info" file.
As a sanity check, I have compared one of these times with the result of the
"time" command on Linux, OK.

Contrary to conventional wisdom, benchmark modulus-unsafe.c shows that symbolic
execution can be much slower at finding a bug than proving program correctness.
This is confirmed by the safe and unsafe "sum-recursive" benchmark where only the
assertion is changed (== versus !=).

If N is increased to eight (8) for insertion-sort/safe, then KLEE does not
produce results within 45 minutes.

For CBMC's path-symex tool, the following type of command was run:

  $ symex -D N=2000 -D ENABLE_CPROVER modulus-safe.c

When necessary "--unwind" was specified (see table).

To avoid the overhead of file I/O, the output program statements in
path_symex.cpp were disabled by modifying the source code.

Both modulus-safe.c and modulus-unsafe.c gave the following errors with
symex after around 3 minutes:

  terminate called after throwing an instance of 'std::bad_alloc'
    what():  std::bad_alloc
  Aborted (core dumped)

For these two benchmarks, I confirmed that decreasing N=1740
gives the right results within around 2 minutes. The error
starts to occur when N<=1745.

Both bst-safe.c and bst-unsafe.c result in "failed to dereference `symbol'".

merge-sort-unsafe.c and sum-recursive-unsafe.c complete in less than one
second but the result is likely unjustified given that path-symex gives
the wrong result for the corresponding safe benchmarks.

The experiments with NSE are currently carried out by first manually
transforming the source code of the benchmarks. The resulting source
code is stored in the "transform/" directory.

The following types of commands are used to compile these sources:

  $ clang++ -std=c++11 -I/path/to/smt-kit/include                 \
                     -L/path/to/smt-kit/target/lib                \
                     -I/path/to/smt-kit/solvers/z3/src/api/c++    \
                     -I/path/to/smt-kit/solvers/z3/src/api        \
                     -L/path/to/smt-kit/solvers/z3/build          \
                     -lz3 -lsmt concrete-sum-safe.cpp

We also need to set the library load path for Z3 to work.
On OS X, this can be done as follows:

  export DYLD_LIBRARY_PATH=/path/to/smt-kit/solvers/z3/build:/path/to/smt-kit/target/lib

On Linux (i.e. dkr11 or dkr12), this export command should be run on
the environment variable LD_LIBRARY_PATH.

Noteworthy, each time in the NSE row is the sum of the compilation
_and_ symbolic execution time. This is, for example, the reason why
the concrete-sum benchmarks take three seconds (the actual runtime
is negligible).

The NSE experiments on 2014-04-24 were like the one on day before except
that we take the "false" branch by default. This is _not_ intended to be
a heuristic but a way to avoid loop unwinding bounds (see "counter",
particularly commit 61c82225d6bf2799c8b).
